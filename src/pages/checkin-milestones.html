<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>签到里程碑 - AI 信息未来</title>
    <link rel="stylesheet" href="/assets/skins/app-shell.css">
<link rel="stylesheet" href="../styles/apple-design.css">
    <!-- 统一工具模块 -->
    <script></script>
    <style>
        /* 页面布局 */
        body {
            padding-top: 48px;
            min-height: 100vh;
        }

        .page-container {
            padding: 48px 0;
        }

        /* 页面头部 */
        .page-header {
            margin-bottom: 40px;
        }

        .page-title {
            font-size: 48px;
            font-weight: 700;
            letter-spacing: -0.03em;
            margin-bottom: 12px;
        }

        .page-subtitle {
            font-size: 19px;
            color: var(--text-secondary);
        }

        /* 进度卡片 */
        .progress-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-xl);
            padding: 32px;
            margin-bottom: 32px;
        }

        .progress-header {
            text-align: center;
            margin-bottom: 32px;
        }

        .progress-header h3 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .progress-message {
            font-size: 17px;
            color: var(--text-secondary);
        }

        /* 统计网格 */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 32px;
        }

        .stat-box {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 24px;
            text-align: center;
        }

        .stat-label {
            font-size: 13px;
            color: var(--text-tertiary);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .stat-value {
            font-size: 40px;
            font-weight: 700;
            color: var(--text-primary);
            letter-spacing: -0.02em;
        }

        .stat-unit {
            font-size: 15px;
            color: var(--text-secondary);
            margin-top: 4px;
        }

        /* 进度条 */
        .progress-section {
            background: var(--bg-secondary);
            border-radius: var(--radius-lg);
            padding: 20px 24px;
        }

        .progress-label-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
        }

        .progress-label {
            font-size: 15px;
            color: var(--text-secondary);
        }

        .progress-value {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--bg-hover);
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #34c759 0%, #30d158 100%);
            border-radius: 4px;
            transition: width 1s var(--ease-out);
        }

        /* 里程碑列表 */
        .milestones-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .milestone-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 24px;
            transition: all var(--transition-fast);
        }

        .milestone-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-card);
        }

        .milestone-card.completed {
            border-color: rgba(52, 199, 89, 0.3);
            background: linear-gradient(135deg, rgba(52, 199, 89, 0.02) 0%, rgba(52, 199, 89, 0.05) 100%);
        }

        .milestone-card.current {
            border-color: rgba(0, 113, 227, 0.4);
            background: linear-gradient(135deg, rgba(0, 113, 227, 0.02) 0%, rgba(0, 113, 227, 0.05) 100%);
            box-shadow: 0 0 0 2px rgba(0, 113, 227, 0.1);
        }

        .milestone-top {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .milestone-icon-wrapper {
            width: 64px;
            height: 64px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .milestone-icon-svg {
            width: 32px;
            height: 32px;
            stroke: var(--text-primary);
        }

        .milestone-card.completed .milestone-icon-wrapper {
            background: rgba(52, 199, 89, 0.1);
        }

        .milestone-card.completed .milestone-icon-svg {
            stroke: #34c759;
        }

        .milestone-card.current .milestone-icon-wrapper {
            background: rgba(0, 113, 227, 0.1);
        }

        .milestone-card.current .milestone-icon-svg {
            stroke: var(--accent);
        }

        .milestone-info {
            flex: 1;
        }

        .milestone-day {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .milestone-name {
            font-size: 17px;
            color: var(--text-secondary);
        }

        .milestone-badge {
            padding: 6px 12px;
            border-radius: var(--radius-full);
            font-size: 13px;
            font-weight: 500;
            white-space: nowrap;
        }

        .milestone-badge.completed {
            background: rgba(52, 199, 89, 0.1);
            color: #34c759;
        }

        .milestone-badge.current {
            background: rgba(0, 113, 227, 0.1);
            color: var(--accent);
        }

        .milestone-badge.locked {
            background: var(--bg-hover);
            color: var(--text-tertiary);
        }

        /* 奖励网格 */
        .rewards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .reward-box {
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            padding: 16px;
            text-align: center;
        }

        .reward-icon-wrapper {
            width: 40px;
            height: 40px;
            margin: 0 auto 8px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .reward-icon-svg {
            width: 28px;
            height: 28px;
            stroke: var(--accent);
        }

        .reward-label {
            font-size: 12px;
            color: var(--text-tertiary);
            margin-bottom: 4px;
        }

        .reward-value {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
        }

        /* 描述 */
        .milestone-description {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
            font-size: 15px;
            color: var(--text-secondary);
        }

        /* 加载状态 */
        .loading-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 80px 0;
            gap: 20px;
        }

        .loading-spinner {
            width: 32px;
            height: 32px;
            border: 2px solid var(--border-color);
            border-top-color: var(--accent);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 17px;
            color: var(--text-secondary);
        }

        /* 响应式 */
        @media (max-width: 768px) {
            .page-title {
                font-size: 32px;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .stat-value {
                font-size: 32px;
            }

            .milestone-top {
                flex-wrap: wrap;
            }

            .rewards-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="nav">
        <div class="nav-inner">
            <a href="dashboard.html" class="nav-logo">AI 信息未来</a>
            <div class="nav-menu">
                <a href="dashboard.html" class="nav-link">首页</a>
                <a href="courses.html" class="nav-link">课程</a>
                <a href="community.html" class="nav-link">社区</a>
                <a href="pk-arena.html" class="nav-link">PK竞技</a>
            </div>
            <div class="nav-actions">
                <div id="authArea"></div>
                <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                
                </div>
            </div>
        </div>
    </nav>

    <!-- 主内容 -->
    <div class="container">
        <div class="page-container">
            <!-- 页面头部 -->
            <div class="page-header">
                <h1 class="page-title">签到里程碑</h1>
                <p class="page-subtitle">坚持每日签到，解锁丰厚奖励</p>
            </div>

            <!-- 加载状态 -->
            <div class="loading-container" id="loading">
                <div class="loading-spinner"></div>
                <p class="loading-text">加载签到数据中...</p>
            </div>

            <!-- 用户进度卡片 -->
            <div class="progress-card" id="progressCard" style="display: none;">
                <div class="progress-header">
                    <h3>您的签到进度</h3>
                    <p class="progress-message" id="progressMessage">继续加油，向下一个里程碑前进</p>
                </div>

                <div class="stats-grid">
                    <div class="stat-box">
                        <div class="stat-label">当前连续</div>
                        <div class="stat-value" id="consecutiveDays">0</div>
                        <div class="stat-unit">天</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">累计签到</div>
                        <div class="stat-value" id="totalDays">0</div>
                        <div class="stat-unit">天</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">最长连续</div>
                        <div class="stat-value" id="maxConsecutive">0</div>
                        <div class="stat-unit">天</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">累计积分</div>
                        <div class="stat-value" id="totalPoints">0</div>
                        <div class="stat-unit">分</div>
                    </div>
                </div>

                <!-- 距离下一个里程碑 -->
                <div class="progress-section" id="nextMilestoneProgress" style="display: none;">
                    <div class="progress-label-row">
                        <span class="progress-label">距离下一个里程碑</span>
                        <span class="progress-value" id="progressText">0/0 天</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>
            </div>

            <!-- 里程碑列表 -->
            <div class="milestones-list" id="milestonesContainer" style="display: none;">
                <!-- 将由JS动态生成 -->
            </div>
        </div>
    </div>

    <script>
        const API_BASE = '/api';
        let userStats = null;
        let currentMilestones = [];

        // 主题切换
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
                        loadMilestones();
        });

        // 初始化主题
        function initTheme() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeIcon(theme);

            document.getElementById('themeToggle').addEventListener('click', function() {
                const currentTheme = document.documentElement.getAttribute('data-theme');
                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
                document.documentElement.setAttribute('data-theme', newTheme);
                localStorage.setItem('theme', newTheme);
                updateThemeIcon(newTheme);
            });
        }

        function updateThemeIcon(theme) {
            const icon = document.querySelector('#themeToggle svg');
            if (theme === 'dark') {
                icon.innerHTML = '<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>';
            } else {
                icon.innerHTML = '<circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>';
            }
        }

        // 初始化认证
        
            if (user.username) {
                const avatar = document.getElementById('userAvatar');
                avatar.textContent = user.username.charAt(0).toUpperCase();
            }
        }

        // 加载里程碑数据
        async function loadMilestones() {
            try {
                const token = localStorage.getItem('token');
                if (!token) {
                    window.location.href = 'login.html';
                    return;
                }

                // 获取用户签到统计
                const statsResponse = await fetch(`${API_BASE}/checkin/stats`, {
                    headers: {
                        'Authorization': `Bearer ${token}`

                if (statsResponse.status === 401 || statsResponse.status === 403) {
                    localStorage.removeItem('token');
                    localStorage.removeItem('user');
                    window.location.href = 'login.html';
                    return;
                }

                if (statsResponse.ok) {
                    const statsData = await statsResponse.json();
                    userStats = statsData.data?.stats || getDefaultStats();
                } else {
                    userStats = getDefaultStats();
                }

                // 获取所有里程碑奖励
                const milestonesResponse = await fetch(`${API_BASE}/checkin/milestones`, {
                    headers: {
                        'Authorization': `Bearer ${token}`

                if (milestonesResponse.status === 401 || milestonesResponse.status === 403) {
                    localStorage.removeItem('token');
                    localStorage.removeItem('user');
                    window.location.href = 'login.html';
                    return;
                }

                let milestones;
                if (milestonesResponse.ok) {
                    const milestonesData = await milestonesResponse.json();
                    milestones = milestonesData.data || getDefaultMilestones();
                } else {
                    milestones = getDefaultMilestones();
                }

                currentMilestones = Array.isArray(milestones) ? milestones : [];
                renderProgress();
                renderMilestones(milestones);

                document.getElementById('loading').style.display = 'none';
                document.getElementById('progressCard').style.display = 'block';
                document.getElementById('milestonesContainer').style.display = 'flex';

            } catch (error) {
                console.error('加载里程碑失败:', error);

                userStats = getDefaultStats();
                currentMilestones = getDefaultMilestones();
                renderProgress();
                renderMilestones(currentMilestones);

                document.getElementById('loading').style.display = 'none';
                document.getElementById('progressCard').style.display = 'block';
                document.getElementById('milestonesContainer').style.display = 'flex';
            }
        }

        function getDefaultStats() {
            return {
                currentConsecutiveDays: 0,
                totalCheckinDays: 0,
                maxConsecutiveDays: 0,
                totalPointsEarned: 0
            };
        }

        // 渲染用户进度
        function renderProgress() {
            document.getElementById('consecutiveDays').textContent = userStats.currentConsecutiveDays || 0;
            document.getElementById('totalDays').textContent = userStats.totalCheckinDays || 0;
            document.getElementById('maxConsecutive').textContent = userStats.maxConsecutiveDays || 0;
            document.getElementById('totalPoints').textContent = userStats.totalPointsEarned || 0;

            // 计算下一个里程碑
            const currentDays = userStats.currentConsecutiveDays || 0;
            const milestones = (Array.isArray(currentMilestones) ? currentMilestones : [])
                .map(m => Number(m?.milestoneDays ?? 0) || 0)
                .filter(v => v > 0)
                .sort((a, b) => a - b);
            const nextMilestone = milestones.find(m => m > currentDays);

            if (nextMilestone) {
                const progress = (currentDays / nextMilestone) * 100;
                document.getElementById('progressText').textContent = `${currentDays}/${nextMilestone} 天`;
                document.getElementById('progressFill').style.width = `${progress}%`;
                document.getElementById('nextMilestoneProgress').style.display = 'block';
                document.getElementById('progressMessage').textContent =
                    `还需 ${nextMilestone - currentDays} 天到达 ${nextMilestone} 天里程碑`;
            } else {
                document.getElementById('nextMilestoneProgress').style.display = 'none';
            }
        }

        // 渲染里程碑列表
        function renderMilestones(milestones) {
            const container = document.getElementById('milestonesContainer');
            const currentDays = userStats.currentConsecutiveDays || 0;

            if (!Array.isArray(milestones) || milestones.length === 0) {
                container.innerHTML = `
                    <div style="width:100%;padding:40px 16px;text-align:center;color:var(--text-secondary);">
                        暂无里程碑配置
                    </div>
                `;
                return;
            }

            milestones.sort((a, b) => a.milestoneDays - b.milestoneDays);

            container.innerHTML = milestones.map(milestone => {
                const isCompleted = currentDays >= milestone.milestoneDays;
                const isCurrent = !isCompleted && milestone.milestoneDays === getNextMilestone(currentDays, milestones);
                const statusClass = isCompleted ? 'completed' : (isCurrent ? 'current' : '');
                const statusText = isCompleted ? '已完成' : (isCurrent ? '进行中' : '未解锁');
                const badgeClass = isCompleted ? 'completed' : (isCurrent ? 'current' : 'locked');

                return `
                    <div class="milestone-card ${statusClass}">
                        <div class="milestone-top">
                            <div class="milestone-icon-wrapper">
                                ${getMilestoneIconSVG(milestone.milestoneDays, isCompleted)}
                            </div>
                            <div class="milestone-info">
                                <div class="milestone-day">第 ${milestone.milestoneDays} 天</div>
                                <div class="milestone-name">${milestone.badgeName || milestone.description || '签到奖励'}</div>
                            </div>
                            <div class="milestone-badge ${badgeClass}">${statusText}</div>
                        </div>

                        <div class="rewards-grid">
                            <div class="reward-box">
                                <div class="reward-icon-wrapper">
                                    <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                                    </svg>
                                </div>
                                <div class="reward-label">积分奖励</div>
                                <div class="reward-value">${milestone.points}</div>
                            </div>
                            ${milestone.treasureBox ? `
                                <div class="reward-box">
                                    <div class="reward-icon-wrapper">
                                        <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <rect x="3" y="8" width="18" height="13" rx="2" ry="2"></rect>
                                            <path d="M3 8 L3 4 C3 3 4 2 5 2 L19 2 C20 2 21 3 21 4 L21 8"></path>
                                            <line x1="12" y1="8" x2="12" y2="21"></line>
                                        </svg>
                                    </div>
                                    <div class="reward-label">宝箱</div>
                                    <div class="reward-value">${milestone.treasureBox}</div>
                                </div>
                            ` : ''}
                            ${milestone.badgeName ? `
                                <div class="reward-box">
                                    <div class="reward-icon-wrapper">
                                        <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <circle cx="12" cy="8" r="7"></circle>
                                            <polyline points="8.21 13.89 7 23 12 20 17 23 15.79 13.88"></polyline>
                                        </svg>
                                    </div>
                                    <div class="reward-label">勋章</div>
                                    <div class="reward-value">${milestone.badgeName}</div>
                                </div>
                            ` : ''}
                            ${milestone.titleName ? `
                                <div class="reward-box">
                                    <div class="reward-icon-wrapper">
                                        <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                            <path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path>
                                            <path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path>
                                            <path d="M4 22h16"></path>
                                            <path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path>
                                            <path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path>
                                            <path d="M18 2H6v7a6 6 0 0 0 12 0V2z"></path>
                                        </svg>
                                    </div>
                                    <div class="reward-label">称号</div>
                                    <div class="reward-value">${milestone.titleName}</div>
                                </div>
                            ` : ''}
                            ${getExtraRewards(milestone.milestoneDays)}
                        </div>

                        ${milestone.description ? `
                            <div class="milestone-description">
                                ${milestone.description}
                            </div>
                        ` : ''}
                    </div>
                `;
            }).join('');
        }

        // 获取里程碑图标SVG
        function getMilestoneIconSVG(days, isCompleted) {
            if (isCompleted) {
                return `
                    <svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                `;
            }

            // 根据天数返回不同的图标
            if (days === 1) {
                return `<svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></svg>`;
            } else if (days === 3) {
                return `<svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>`;
            } else if (days === 7) {
                return `<svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon></svg>`;
            } else if (days >= 30) {
                return `<svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"></path><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"></path><path d="M4 22h16"></path><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"></path><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"></path><path d="M18 2H6v7a6 6 0 0 0 12 0V2z"></path></svg>`;
            }
            return `<svg class="milestone-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg>`;
        }

        // 获取额外奖励
        function getExtraRewards(days) {
            let rewards = [];
            if (days === 7) {
                rewards.push(`
                    <div class="reward-box">
                        <div class="reward-icon-wrapper">
                            <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                        </div>
                        <div class="reward-label">道具</div>
                        <div class="reward-value">保护卡 x1</div>
                    </div>
                `);
            }
            if (days === 30) {
                rewards.push(`
                    <div class="reward-box">
                        <div class="reward-icon-wrapper">
                            <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                        </div>
                        <div class="reward-label">道具</div>
                        <div class="reward-value">保护卡 x2<br>补签卡 x1</div>
                    </div>
                `);
            }
            if (days === 100) {
                rewards.push(`
                    <div class="reward-box">
                        <div class="reward-icon-wrapper">
                            <svg class="reward-icon-svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
                            </svg>
                        </div>
                        <div class="reward-label">道具</div>
                        <div class="reward-value">保护卡 x5<br>补签卡 x3</div>
                    </div>
                `);
            }
            return rewards.join('');
        }

        // 获取下一个里程碑
        function getNextMilestone(currentDays, milestones) {
            const next = milestones.find(m => m.milestoneDays > currentDays);
            return next ? next.milestoneDays : null;
        }

        // 默认里程碑数据
        function getDefaultMilestones() {
            return [
                { milestoneDays: 1, points: 10, description: '每日签到基础奖励' },
                { milestoneDays: 2, points: 10, description: '连续2天奖励' },
                { milestoneDays: 3, points: 15, description: '连续3天奖励' },
                { milestoneDays: 4, points: 15, description: '连续4天奖励' },
                { milestoneDays: 5, points: 20, description: '连续5天奖励' },
                { milestoneDays: 6, points: 20, description: '连续6天奖励' },
                { milestoneDays: 7, points: 50, treasureBox: 'common', badgeName: '连续签到7天', titleName: '坚持不懈', description: '7天里程碑：宝箱 + 称号' },
                { milestoneDays: 14, points: 80, treasureBox: 'rare', badgeName: '连续签到14天', titleName: '学习达人', description: '14天里程碑：稀有宝箱' },
                { milestoneDays: 21, points: 100, treasureBox: 'epic', badgeName: '连续签到21天', titleName: '自律之星', description: '21天里程碑：史诗宝箱' },
                { milestoneDays: 30, points: 150, treasureBox: 'legendary', badgeName: '连续签到30天', titleName: '终身学习者', description: '30天里程碑：传说宝箱' },
                { milestoneDays: 100, points: 500, treasureBox: 'mythic', badgeName: '连续签到100天', titleName: '传奇学霸', description: '100天里程碑：神话宝箱' }
            ];
        }
    </script>
    <script src="/js/app-shell.js"></script>
    
</body>
</html>
