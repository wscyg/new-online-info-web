<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å­¦ä¹ ç¤¾åŒº - åœ¨çº¿æ•™è‚²å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif;
            background: #f8f8f8;
            min-height: 100vh;
        }
        
        /* é¡¶éƒ¨å¯¼èˆª */
        .header {
            background: white;
            box-shadow: 0 1px 0 rgba(0,0,0,0.08);
            position: sticky;
            top: 0;
            z-index: 1000;
        }
        
        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
            height: 56px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 20px;
            font-weight: bold;
            color: #ff2442;
        }
        
        .search-bar {
            flex: 1;
            max-width: 400px;
            margin: 0 40px;
        }
        
        .search-input {
            width: 100%;
            padding: 8px 16px;
            border: 1px solid #e8e8e8;
            border-radius: 100px;
            background: #f5f5f5;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .search-input:focus {
            outline: none;
            background: white;
            border-color: #ff2442;
        }
        
        .nav-actions {
            display: flex;
            align-items: center;
            gap: 24px;
        }
        
        .nav-link {
            color: #333;
            text-decoration: none;
            font-size: 15px;
            transition: color 0.3s;
        }
        
        .nav-link:hover {
            color: #ff2442;
        }
        
        .publish-btn {
            padding: 8px 20px;
            background: #ff2442;
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .publish-btn:hover {
            background: #ff1428;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(255, 36, 66, 0.3);
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            cursor: pointer;
        }
        
        /* åˆ†ç±»æ ‡ç­¾ */
        .category-tabs {
            background: white;
            border-bottom: 1px solid #f0f0f0;
            position: sticky;
            top: 56px;
            z-index: 999;
        }
        
        .tabs-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            padding: 0 20px;
            overflow-x: auto;
            scrollbar-width: none;
        }
        
        .tabs-container::-webkit-scrollbar {
            display: none;
        }
        
        .tab-item {
            padding: 16px 20px;
            color: #666;
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.3s;
            position: relative;
        }
        
        .tab-item.active {
            color: #ff2442;
            font-weight: 500;
        }
        
        .tab-item.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 24px;
            height: 3px;
            background: #ff2442;
            border-radius: 2px;
        }
        
        .tab-item:hover {
            color: #ff2442;
        }
        
        /* ä¸»å†…å®¹åŒº */
        .main-container {
            max-width: 1200px;
            margin: 24px auto;
            padding: 0 20px;
        }
        
        /* ç€‘å¸ƒæµå¸ƒå±€ */
        .waterfall-container {
            column-count: 5;
            column-gap: 16px;
        }
        
        /* ç¬”è®°å¡ç‰‡ */
        .note-card {
            break-inside: avoid;
            margin-bottom: 16px;
            background: white;
            border-radius: 8px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        .note-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
        }
        
        .note-cover {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        
        .note-cover img {
            width: 100%;
            display: block;
        }
        
        .note-type-badge {
            position: absolute;
            top: 8px;
            left: 8px;
            padding: 4px 8px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            font-size: 12px;
            border-radius: 4px;
            backdrop-filter: blur(8px);
        }
        
        .video-duration {
            position: absolute;
            bottom: 8px;
            right: 8px;
            padding: 2px 6px;
            background: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 12px;
            border-radius: 4px;
        }
        
        .note-content {
            padding: 12px;
        }
        
        .note-title {
            font-size: 14px;
            color: #333;
            line-height: 1.5;
            margin-bottom: 8px;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
            font-weight: 500;
        }
        
        .note-author {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 12px;
        }
        
        .author-info {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .author-avatar {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 12px;
        }
        
        .author-name {
            font-size: 12px;
            color: #666;
        }
        
        .note-likes {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            color: #666;
        }
        
        .like-icon {
            color: #ff2442;
        }
        
        /* å‘å¸ƒå¼¹çª— */
        .publish-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            animation: fadeIn 0.3s;
        }
        
        .publish-modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .publish-container {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow: hidden;
            animation: slideUp 0.3s;
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .publish-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }
        
        .publish-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .close-btn {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: #f5f5f5;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: all 0.3s;
        }
        
        .close-btn:hover {
            background: #e8e8e8;
        }
        
        .publish-body {
            padding: 20px;
            max-height: calc(90vh - 140px);
            overflow-y: auto;
        }
        
        .upload-area {
            border: 2px dashed #e8e8e8;
            border-radius: 8px;
            padding: 40px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            margin-bottom: 20px;
        }
        
        .upload-area:hover {
            border-color: #ff2442;
            background: #fff5f5;
        }
        
        .upload-icon {
            font-size: 48px;
            margin-bottom: 12px;
        }
        
        .upload-text {
            color: #666;
            font-size: 14px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            font-size: 14px;
            color: #333;
            margin-bottom: 8px;
            display: block;
            font-weight: 500;
        }
        
        .form-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            font-size: 14px;
            transition: all 0.3s;
        }
        
        .form-input:focus {
            outline: none;
            border-color: #ff2442;
        }
        
        textarea.form-input {
            resize: vertical;
            min-height: 120px;
            font-family: inherit;
        }
        
        .tag-input-container {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            padding: 8px;
            border: 1px solid #e8e8e8;
            border-radius: 8px;
            min-height: 44px;
        }
        
        .tag {
            padding: 4px 12px;
            background: #f5f5f5;
            border-radius: 16px;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 4px;
        }
        
        .tag-remove {
            cursor: pointer;
            color: #999;
        }
        
        .tag-input {
            border: none;
            outline: none;
            flex: 1;
            min-width: 100px;
            font-size: 14px;
        }
        
        .category-select {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 12px;
        }
        
        .category-option {
            padding: 8px 16px;
            border: 1px solid #e8e8e8;
            border-radius: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 14px;
        }
        
        .category-option:hover {
            border-color: #ff2442;
            color: #ff2442;
        }
        
        .category-option.selected {
            background: #ff2442;
            color: white;
            border-color: #ff2442;
        }
        
        .publish-footer {
            padding: 20px;
            border-top: 1px solid #f0f0f0;
            display: flex;
            justify-content: flex-end;
            gap: 12px;
        }
        
        .btn {
            padding: 8px 24px;
            border-radius: 20px;
            border: none;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn-cancel {
            background: #f5f5f5;
            color: #666;
        }
        
        .btn-cancel:hover {
            background: #e8e8e8;
        }
        
        .btn-publish {
            background: #ff2442;
            color: white;
        }
        
        .btn-publish:hover {
            background: #ff1428;
        }
        
        /* å›¾ç‰‡é¢„è§ˆ */
        .image-preview-container {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }
        
        .image-preview {
            position: relative;
            padding-bottom: 100%;
            background: #f5f5f5;
            border-radius: 8px;
            overflow: hidden;
        }
        
        .image-preview img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .image-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            width: 24px;
            height: 24px;
            background: rgba(0, 0, 0, 0.6);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 16px;
        }
        
        /* æµ®åŠ¨æ“ä½œæŒ‰é’® */
        .fab {
            position: fixed;
            bottom: 24px;
            right: 24px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: #ff2442;
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            box-shadow: 0 4px 12px rgba(255, 36, 66, 0.3);
            transition: all 0.3s;
            z-index: 100;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 20px rgba(255, 36, 66, 0.4);
        }
        
        /* åŠ è½½æ›´å¤š */
        .load-more {
            text-align: center;
            padding: 40px;
        }
        
        .load-more-btn {
            padding: 10px 32px;
            background: white;
            border: 1px solid #e8e8e8;
            border-radius: 20px;
            color: #666;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .load-more-btn:hover {
            border-color: #ff2442;
            color: #ff2442;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 1200px) {
            .waterfall-container {
                column-count: 4;
            }
        }
        
        @media (max-width: 900px) {
            .waterfall-container {
                column-count: 3;
            }
        }
        
        @media (max-width: 600px) {
            .waterfall-container {
                column-count: 2;
            }
            
            .search-bar {
                display: none;
            }
            
            .category-select {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">
                <span>ğŸ“š</span>
                <span>å­¦ä¹ åœˆ</span>
            </div>
            
            <div class="search-bar">
                <input type="text" class="search-input" placeholder="æœç´¢å­¦ä¹ ç¬”è®°ã€ç»éªŒåˆ†äº«...">
            </div>
            
            <div class="nav-actions">
                <a href="#" class="nav-link">å‘ç°</a>
                <a href="#" class="nav-link">å…³æ³¨</a>
                <a href="#" class="nav-link">æ¶ˆæ¯</a>
                <button class="publish-btn" onclick="showPublishModal()">å‘å¸ƒ</button>
                <div class="user-avatar" onclick="goToProfile()">å¼ </div>
            </div>
        </div>
    </header>

    <!-- åˆ†ç±»æ ‡ç­¾ -->
    <div class="category-tabs">
        <div class="tabs-container">
            <div class="tab-item active" onclick="switchCategory('æ¨è')">æ¨è</div>
            <div class="tab-item" onclick="switchCategory('å‰ç«¯å¼€å‘')">å‰ç«¯å¼€å‘</div>
            <div class="tab-item" onclick="switchCategory('åç«¯å¼€å‘')">åç«¯å¼€å‘</div>
            <div class="tab-item" onclick="switchCategory('äººå·¥æ™ºèƒ½')">äººå·¥æ™ºèƒ½</div>
            <div class="tab-item" onclick="switchCategory('æ•°æ®åˆ†æ')">æ•°æ®åˆ†æ</div>
            <div class="tab-item" onclick="switchCategory('äº§å“è®¾è®¡')">äº§å“è®¾è®¡</div>
            <div class="tab-item" onclick="switchCategory('è€ƒè¯•è®¤è¯')">è€ƒè¯•è®¤è¯</div>
            <div class="tab-item" onclick="switchCategory('èŒåœºç»éªŒ')">èŒåœºç»éªŒ</div>
            <div class="tab-item" onclick="switchCategory('è¯»ä¹¦ç¬”è®°')">è¯»ä¹¦ç¬”è®°</div>
            <div class="tab-item" onclick="switchCategory('é¡¹ç›®å®æˆ˜')">é¡¹ç›®å®æˆ˜</div>
        </div>
    </div>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="main-container">
        <div class="waterfall-container" id="notesContainer">
            <!-- ç¬”è®°å¡ç‰‡ 1 -->
            <div class="note-card" onclick="viewNote(1)">
                <div class="note-cover">
                    <div style="height: 200px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);"></div>
                    <span class="note-type-badge">å­¦ä¹ ç¬”è®°</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">Vue3 Composition API å®Œå…¨æŒ‡å—ï¼šä»å…¥é—¨åˆ°å®æˆ˜é¡¹ç›®å¼€å‘</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">æ</div>
                            <span class="author-name">ææ˜</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>2.3k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 2 -->
            <div class="note-card" onclick="viewNote(2)">
                <div class="note-cover">
                    <div style="height: 260px; background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);"></div>
                    <span class="note-type-badge">é¡¹ç›®æ€»ç»“</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">æˆ‘æ˜¯å¦‚ä½•ç”¨React Nativeå¼€å‘ä¸€ä¸ªæ—¥æ´»10ä¸‡çš„APPçš„</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">ç‹</div>
                            <span class="author-name">ç‹å°èŠ³</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>5.6k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 3 -->
            <div class="note-card" onclick="viewNote(3)">
                <div class="note-cover">
                    <div style="height: 180px; background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);"></div>
                    <span class="video-duration">15:23</span>
                    <span class="note-type-badge">è§†é¢‘æ•™ç¨‹</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">Pythonæ•°æ®åˆ†æå®æˆ˜ï¼šç”¨Pandaså¤„ç†ç™¾ä¸‡çº§æ•°æ®</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">å¼ </div>
                            <span class="author-name">å¼ ä¸‰</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>1.8k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 4 -->
            <div class="note-card" onclick="viewNote(4)">
                <div class="note-cover">
                    <div style="height: 220px; background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);"></div>
                    <span class="note-type-badge">é¢è¯•ç»éªŒ</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">å­—èŠ‚è·³åŠ¨å‰ç«¯é¢è¯•å…¨æµç¨‹è¯¦è§£ï¼ˆå·²æ‹¿offerï¼‰</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">èµµ</div>
                            <span class="author-name">èµµå…­</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>8.9k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 5 -->
            <div class="note-card" onclick="viewNote(5)">
                <div class="note-cover">
                    <div style="height: 190px; background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);"></div>
                    <span class="note-type-badge">å­¦ä¹ æ–¹æ³•</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">å¦‚ä½•é«˜æ•ˆå­¦ä¹ ï¼šæˆ‘çš„ä¸ªäººçŸ¥è¯†ç®¡ç†ç³»ç»Ÿ</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">åˆ˜</div>
                            <span class="author-name">åˆ˜æ´‹</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>3.2k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 6 -->
            <div class="note-card" onclick="viewNote(6)">
                <div class="note-cover">
                    <div style="height: 240px; background: linear-gradient(135deg, #a1c4fd 0%, #c2e9fb 100%);"></div>
                    <span class="note-type-badge">ç®—æ³•è¯¦è§£</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">LeetCodeåˆ·é¢˜500é“åçš„ç®—æ³•å¿ƒå¾—æ€»ç»“</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">é™ˆ</div>
                            <span class="author-name">é™ˆæ™¨</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>6.7k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 7 -->
            <div class="note-card" onclick="viewNote(7)">
                <div class="note-cover">
                    <div style="height: 210px; background: linear-gradient(135deg, #d299c2 0%, #fef9d7 100%);"></div>
                    <span class="note-type-badge">è®¾è®¡æ•™ç¨‹</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">ä»é›¶å¼€å§‹å­¦UIè®¾è®¡ï¼šé…è‰²åŸç†ä¸å®è·µ</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">å‘¨</div>
                            <span class="author-name">å‘¨é›¨</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>4.1k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 8 -->
            <div class="note-card" onclick="viewNote(8)">
                <div class="note-cover">
                    <div style="height: 170px; background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);"></div>
                    <span class="note-type-badge">å·¥å…·æ¨è</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">æå‡å¼€å‘æ•ˆç‡çš„10ä¸ªVSCodeæ’ä»¶æ¨è</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">å´</div>
                            <span class="author-name">å´æ•</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>2.9k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 9 -->
            <div class="note-card" onclick="viewNote(9)">
                <div class="note-cover">
                    <div style="height: 230px; background: linear-gradient(135deg, #fddb92 0%, #d1fdff 100%);"></div>
                    <span class="note-type-badge">æ¶æ„è®¾è®¡</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">å¾®æœåŠ¡æ¶æ„å®æˆ˜ï¼šä»å•ä½“åº”ç”¨åˆ°åˆ†å¸ƒå¼ç³»ç»Ÿ</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">éƒ‘</div>
                            <span class="author-name">éƒ‘å¼º</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>5.3k</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ç¬”è®°å¡ç‰‡ 10 -->
            <div class="note-card" onclick="viewNote(10)">
                <div class="note-cover">
                    <div style="height: 250px; background: linear-gradient(135deg, #b8cbb8 0%, #cf6cc9 100%);"></div>
                    <span class="note-type-badge">è€ƒè¯ç»éªŒ</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">PMPè€ƒè¯•ä¸€æ¬¡é€šè¿‡ç»éªŒåˆ†äº«ï¼ˆé™„å®Œæ•´èµ„æ–™ï¼‰</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar">å­™</div>
                            <span class="author-name">å­™ä¸½</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>7.2k</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- åŠ è½½æ›´å¤š -->
        <div class="load-more">
            <button class="load-more-btn" onclick="loadMore()">åŠ è½½æ›´å¤š</button>
        </div>
    </main>

    <!-- å‘å¸ƒå¼¹çª— -->
    <div class="publish-modal" id="publishModal">
        <div class="publish-container">
            <div class="publish-header">
                <h2 class="publish-title">å‘å¸ƒç¬”è®°</h2>
                <button class="close-btn" onclick="closePublishModal()">Ã—</button>
            </div>
            
            <div class="publish-body">
                <!-- å›¾ç‰‡ä¸Šä¼  -->
                <div class="upload-area" onclick="selectImages()">
                    <div class="upload-icon">ğŸ“·</div>
                    <div class="upload-text">ç‚¹å‡»ä¸Šä¼ å›¾ç‰‡/è§†é¢‘ï¼ˆæœ€å¤š9å¼ ï¼‰</div>
                </div>
                <input type="file" id="imageInput" multiple accept="image/*,video/*" style="display: none;">
                
                <!-- å›¾ç‰‡é¢„è§ˆ -->
                <div class="image-preview-container" id="imagePreview" style="display: none;">
                    <!-- é¢„è§ˆå›¾ç‰‡å°†åŠ¨æ€æ·»åŠ  -->
                </div>
                
                <!-- æ ‡é¢˜è¾“å…¥ -->
                <div class="form-group">
                    <label class="form-label">æ ‡é¢˜</label>
                    <input type="text" class="form-input" id="noteTitle" placeholder="å¡«å†™æ ‡é¢˜ä¼šæœ‰æ›´å¤šèµå“¦ï½" maxlength="50">
                </div>
                
                <!-- å†…å®¹è¾“å…¥ -->
                <div class="form-group">
                    <label class="form-label">æ­£æ–‡</label>
                    <textarea class="form-input" id="noteContent" placeholder="åˆ†äº«ä½ çš„å­¦ä¹ å¿ƒå¾—ã€ç»éªŒã€ç¬”è®°..." maxlength="1000"></textarea>
                </div>
                
                <!-- åˆ†ç±»é€‰æ‹© -->
                <div class="form-group">
                    <label class="form-label">é€‰æ‹©åˆ†ç±»</label>
                    <div class="category-select">
                        <div class="category-option" onclick="selectCategory(this)">å­¦ä¹ ç¬”è®°</div>
                        <div class="category-option" onclick="selectCategory(this)">é¡¹ç›®æ€»ç»“</div>
                        <div class="category-option" onclick="selectCategory(this)">é¢è¯•ç»éªŒ</div>
                        <div class="category-option" onclick="selectCategory(this)">å·¥å…·æ¨è</div>
                        <div class="category-option" onclick="selectCategory(this)">ç®—æ³•è¯¦è§£</div>
                        <div class="category-option" onclick="selectCategory(this)">æ¶æ„è®¾è®¡</div>
                        <div class="category-option" onclick="selectCategory(this)">è€ƒè¯ç»éªŒ</div>
                        <div class="category-option" onclick="selectCategory(this)">èŒåœºåˆ†äº«</div>
                    </div>
                </div>
                
                <!-- æ ‡ç­¾è¾“å…¥ -->
                <div class="form-group">
                    <label class="form-label">æ·»åŠ æ ‡ç­¾</label>
                    <div class="tag-input-container" onclick="focusTagInput()">
                        <div class="tag">
                            å‰ç«¯å¼€å‘
                            <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                        </div>
                        <div class="tag">
                            Vue3
                            <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                        </div>
                        <input type="text" class="tag-input" id="tagInput" placeholder="è¾“å…¥æ ‡ç­¾ï¼Œå›è½¦æ·»åŠ ">
                    </div>
                </div>
            </div>
            
            <div class="publish-footer">
                <button class="btn btn-cancel" onclick="closePublishModal()">å–æ¶ˆ</button>
                <button class="btn btn-publish" onclick="publishNote()">å‘å¸ƒç¬”è®°</button>
            </div>
        </div>
    </div>

    <!-- æµ®åŠ¨å‘å¸ƒæŒ‰é’® -->
    <button class="fab" onclick="showPublishModal()">+</button>

    <script>
        // æ˜¾ç¤ºå‘å¸ƒå¼¹çª—
        function showPublishModal() {
            document.getElementById('publishModal').classList.add('show');
        }
        
        // å…³é—­å‘å¸ƒå¼¹çª—
        function closePublishModal() {
            document.getElementById('publishModal').classList.remove('show');
        }
        
        // é€‰æ‹©å›¾ç‰‡
        function selectImages() {
            document.getElementById('imageInput').click();
        }
        
        // å¤„ç†å›¾ç‰‡ä¸Šä¼ 
        document.getElementById('imageInput').addEventListener('change', function(e) {
            const files = e.target.files;
            const previewContainer = document.getElementById('imagePreview');
            
            if (files.length > 0) {
                previewContainer.style.display = 'grid';
                previewContainer.innerHTML = '';
                
                for (let i = 0; i < Math.min(files.length, 9); i++) {
                    const file = files[i];
                    const reader = new FileReader();
                    
                    reader.onload = function(e) {
                        const preview = document.createElement('div');
                        preview.className = 'image-preview';
                        preview.innerHTML = `
                            <img src="${e.target.result}" alt="">
                            <span class="image-remove" onclick="removeImage(this)">Ã—</span>
                        `;
                        previewContainer.appendChild(preview);
                    };
                    
                    reader.readAsDataURL(file);
                }
            }
        });
        
        // ç§»é™¤å›¾ç‰‡
        function removeImage(element) {
            element.parentElement.remove();
            const previewContainer = document.getElementById('imagePreview');
            if (previewContainer.children.length === 0) {
                previewContainer.style.display = 'none';
            }
        }
        
        // é€‰æ‹©åˆ†ç±»
        function selectCategory(element) {
            // ç§»é™¤å…¶ä»–é€‰ä¸­çŠ¶æ€
            document.querySelectorAll('.category-option').forEach(option => {
                option.classList.remove('selected');
            });
            // æ·»åŠ é€‰ä¸­çŠ¶æ€
            element.classList.add('selected');
        }
        
        // èšç„¦æ ‡ç­¾è¾“å…¥
        function focusTagInput() {
            document.getElementById('tagInput').focus();
        }
        
        // ç§»é™¤æ ‡ç­¾
        function removeTag(element) {
            event.stopPropagation();
            element.parentElement.remove();
        }
        
        // æ·»åŠ æ ‡ç­¾
        document.getElementById('tagInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                e.preventDefault();
                const tag = document.createElement('div');
                tag.className = 'tag';
                tag.innerHTML = `
                    ${this.value}
                    <span class="tag-remove" onclick="removeTag(this)">Ã—</span>
                `;
                this.parentElement.insertBefore(tag, this);
                this.value = '';
            }
        });
        
        const API_BASE = window.location.hostname === 'localhost'
            ? 'http://localhost:8070/api'
            : 'http://42.194.245.66:8070/api';

        // å‘å¸ƒç¬”è®°
        async function publishNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            const categorySelect = document.querySelector('.modal select') || { value: 'tech' };
            const category = categorySelect.value || 'tech';

            if (!title || !content) {
                alert('è¯·å¡«å†™æ ‡é¢˜å’Œå†…å®¹');
                return;
            }

            const token = localStorage.getItem('token');
            if (!token) {
                alert('è¯·å…ˆç™»å½•');
                window.location.href = 'login.html';
                return;
            }

            // æ”¶é›†æ ‡ç­¾
            const tagElements = document.querySelectorAll('.selected-tag');
            const tags = Array.from(tagElements).map(el => el.textContent.replace('Ã—', '').trim());

            try {
                const response = await fetch(`${API_BASE}/community/notes`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    body: JSON.stringify({
                        title,
                        content,
                        category,
                        type: 'article',
                        tags,
                        summary: content.substring(0, 200)
                    })
                });

                const result = await response.json();

                if (result.code === 200 || result.success) {
                    alert('âœ… å‘å¸ƒæˆåŠŸï¼');
                    closePublishModal();

                    // æ¸…ç©ºè¡¨å•
                    document.getElementById('noteTitle').value = '';
                    document.getElementById('noteContent').value = '';
                    document.getElementById('imagePreview').innerHTML = '';
                    document.getElementById('imagePreview').style.display = 'none';

                    // é‡æ–°åŠ è½½ç¬”è®°åˆ—è¡¨
                    loadNotes('all');
                } else {
                    alert('å‘å¸ƒå¤±è´¥: ' + (result.message || 'æœªçŸ¥é”™è¯¯'));
                }
            } catch (error) {
                console.error('å‘å¸ƒç¬”è®°å¤±è´¥:', error);
                alert('å‘å¸ƒå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            }
        }
        
        let currentPage = 1;
        let currentCategory = 'all';
        let isLoading = false;
        let hasMore = true;

        // åˆ‡æ¢åˆ†ç±»
        function switchCategory(category) {
            // æ›´æ–°æ ‡ç­¾æ ·å¼
            document.querySelectorAll('.tab-item').forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');

            currentCategory = category;
            currentPage = 1;
            hasMore = true;

            // æ¸…ç©ºç°æœ‰å†…å®¹
            document.getElementById('notesContainer').innerHTML = '';

            // åŠ è½½å¯¹åº”åˆ†ç±»çš„å†…å®¹
            loadNotes(category);
        }

        // æŸ¥çœ‹ç¬”è®°è¯¦æƒ…
        function viewNote(noteId) {
            window.location.href = `note-detail.html?id=${noteId}`;
        }

        // å‰å¾€ä¸ªäººä¸»é¡µ
        function goToProfile() {
            window.location.href = 'social-profile.html';
        }

        // åŠ è½½æ›´å¤š
        function loadMore() {
            if (!isLoading && hasMore) {
                currentPage++;
                loadNotes(currentCategory, true);
            }
        }

        // åŠ è½½ç¬”è®°
        async function loadNotes(category = 'all', append = false) {
            if (isLoading) return;
            isLoading = true;

            const container = document.getElementById('notesContainer');

            if (!append) {
                container.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">åŠ è½½ä¸­...</div>';
            }

            try {
                const response = await fetch(
                    `${API_BASE}/community/notes?category=${category}&page=${currentPage}&size=20&sort=hot`
                );

                const result = await response.json();

                if (result.code === 200 && result.data) {
                    const notes = result.data.items || [];
                    hasMore = result.data.hasNext;

                    if (!append) {
                        container.innerHTML = '';
                    }

                    if (notes.length === 0 && !append) {
                        container.innerHTML = `
                            <div style="text-align: center; padding: 60px; color: #999;">
                                <div style="font-size: 48px; margin-bottom: 16px;">ğŸ“</div>
                                <p>æš‚æ— ç¬”è®°ï¼Œå¿«æ¥å‘å¸ƒç¬¬ä¸€ç¯‡å§ï¼</p>
                            </div>
                        `;
                        return;
                    }

                    notes.forEach(note => {
                        const noteCard = createNoteCard(note);
                        container.appendChild(noteCard);
                    });
                } else {
                    if (!append) {
                        container.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">åŠ è½½å¤±è´¥</div>';
                    }
                }
            } catch (error) {
                console.error('åŠ è½½ç¬”è®°å¤±è´¥:', error);
                if (!append) {
                    container.innerHTML = '<div style="text-align: center; padding: 40px; color: #999;">åŠ è½½å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•</div>';
                }
            } finally {
                isLoading = false;
            }
        }

        // åˆ›å»ºç¬”è®°å¡ç‰‡
        function createNoteCard(note) {
            const colors = [
                'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
                'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
                'linear-gradient(135deg, #fa709a 0%, #fee140 100%)',
                'linear-gradient(135deg, #a8edea 0%, #fed6e3 100%)',
                'linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%)',
                'linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%)'
            ];

            const noteCard = document.createElement('div');
            noteCard.className = 'note-card';
            noteCard.onclick = () => viewNote(note.id);

            const height = Math.floor(Math.random() * 80) + 160;
            const coverImage = note.coverImages && note.coverImages.length > 0
                ? `<img src="${note.coverImages[0]}" style="width: 100%; height: ${height}px; object-fit: cover;">`
                : `<div style="height: ${height}px; background: ${colors[note.id % colors.length]};"></div>`;

            const author = note.author || {};
            const avatarInitial = (author.nickname || author.username || 'ç”¨')[0];

            const categoryLabels = {
                'interview': 'é¢è¯•ç»éªŒ',
                'offer': 'Offeråˆ†äº«',
                'tech': 'æŠ€æœ¯æ–‡ç« ',
                'qa': 'é—®ç­”è®¨è®º'
            };

            noteCard.innerHTML = `
                <div class="note-cover">
                    ${coverImage}
                    <span class="note-type-badge">${categoryLabels[note.category] || 'å­¦ä¹ ç¬”è®°'}</span>
                </div>
                <div class="note-content">
                    <h3 class="note-title">${note.title || 'æ— æ ‡é¢˜'}</h3>
                    <div class="note-author">
                        <div class="author-info">
                            <div class="author-avatar" style="background: ${colors[(note.userId || 0) % colors.length]}">
                                ${author.avatar ? `<img src="${author.avatar}" style="width: 100%; height: 100%; border-radius: 50%;">` : avatarInitial}
                            </div>
                            <span class="author-name">${author.nickname || author.username || 'åŒ¿åç”¨æˆ·'}</span>
                        </div>
                        <div class="note-likes">
                            <span class="like-icon">â¤ï¸</span>
                            <span>${note.likeCount || 0}</span>
                        </div>
                    </div>
                </div>
            `;

            return noteCard;
        }

        // æ— é™æ»šåŠ¨
        window.addEventListener('scroll', () => {
            if ((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 500) {
                loadMore();
            }
        });

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            loadNotes('all');
        });
    </script>
</body>
</html>