<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>学习中心 - AI 信息未来</title>
    <link rel="stylesheet" href="../styles/apple-design.css">
    <style>
        body {
            padding-top: 48px;
            background: var(--bg-secondary);
        }

        .page-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 32px 22px;
            display: grid;
            grid-template-columns: 280px 1fr 320px;
            gap: 24px;
        }

        /* === 左侧边栏 === */
        .sidebar-left {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* 用户卡片 */
        .user-profile-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 28px 24px;
            text-align: center;
        }

        .profile-avatar {
            width: 80px;
            height: 80px;
            margin: 0 auto 16px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            font-weight: 600;
        }

        .profile-avatar svg {
            width: 40px;
            height: 40px;
        }

        .profile-name {
            font-size: 21px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .profile-level {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }

        .profile-stat {
            text-align: center;
        }

        .profile-stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent);
            letter-spacing: -0.02em;
        }

        .profile-stat-label {
            font-size: 11px;
            color: var(--text-tertiary);
            margin-top: 4px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* 快速链接 */
        .quick-nav {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
        }

        .quick-nav-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .quick-nav-list {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .quick-nav-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 12px;
            color: var(--text-secondary);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
            cursor: pointer;
        }

        .quick-nav-item:hover {
            background: var(--bg-hover);
            color: var(--text-primary);
            transform: translateX(2px);
        }

        .quick-nav-icon {
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-hover);
        }

        .quick-nav-icon svg {
            width: 16px;
            height: 16px;
        }

        /* === 中间内容区 === */
        .main-content {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* 欢迎横幅 */
        .welcome-banner {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: var(--radius-xl);
            padding: 40px 32px;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .welcome-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, rgba(255,255,255,0.15) 0%, transparent 70%);
            border-radius: 50%;
        }

        .welcome-content {
            position: relative;
            z-index: 1;
        }

        .welcome-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 8px;
            letter-spacing: -0.02em;
        }

        .welcome-subtitle {
            font-size: 17px;
            opacity: 0.95;
            margin-bottom: 28px;
        }

        .welcome-stats {
            display: flex;
            gap: 48px;
        }

        .welcome-stat-value {
            font-size: 40px;
            font-weight: 700;
            letter-spacing: -0.03em;
            line-height: 1;
        }

        .welcome-stat-label {
            font-size: 13px;
            opacity: 0.9;
            margin-top: 6px;
        }

        /* 学习进度 */
        .progress-section {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 28px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 21px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .section-link {
            font-size: 14px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .course-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        .course-item {
            display: flex;
            gap: 16px;
            padding: 16px;
            background: var(--bg-secondary);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .course-item:hover {
            background: var(--bg-hover);
            transform: translateY(-2px);
        }

        .course-thumb {
            width: 100px;
            height: 75px;
            border-radius: var(--radius-sm);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 32px;
            flex-shrink: 0;
        }

        .course-thumb svg {
            width: 40px;
            height: 40px;
        }

        .course-details {
            flex: 1;
            min-width: 0;
        }

        .course-name {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 4px;
        }

        .course-chapter {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .progress-track {
            height: 6px;
            background: var(--border-color);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
            border-radius: 3px;
            transition: width 0.5s var(--ease-out);
        }

        .course-action {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .continue-btn {
            padding: 8px 20px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: var(--radius-full);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all var(--transition-fast);
            white-space: nowrap;
        }

        .continue-btn:hover {
            background: var(--accent-hover);
            transform: scale(1.02);
        }

        /* 推荐课程 */
        .recommendations {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 28px;
        }

        .course-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .rec-course-card {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            overflow: hidden;
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .rec-course-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-card);
        }

        .rec-course-cover {
            height: 140px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 40px;
        }

        .rec-course-cover svg {
            width: 48px;
            height: 48px;
        }

        .rec-course-body {
            padding: 16px;
        }

        .rec-course-category {
            font-size: 12px;
            color: var(--accent);
            font-weight: 500;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .rec-course-title {
            font-size: 17px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 6px;
            line-height: 1.3;
        }

        .rec-course-instructor {
            font-size: 13px;
            color: var(--text-secondary);
            margin-bottom: 12px;
        }

        .rec-course-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid var(--border-color);
        }

        .rec-course-price {
            font-size: 19px;
            font-weight: 600;
            color: var(--accent);
        }

        .rec-course-rating {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 13px;
            color: var(--text-secondary);
        }

        .rec-course-rating svg {
            width: 14px;
            height: 14px;
            fill: #f59e0b;
        }

        /* === 右侧边栏 === */
        .sidebar-right {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* 学习计划 */
        .study-calendar {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
        }

        .calendar-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 16px;
        }

        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
        }

        .calendar-cell {
            aspect-ratio: 1;
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: var(--text-secondary);
            background: var(--bg-secondary);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .calendar-cell:hover {
            background: var(--bg-hover);
        }

        .calendar-cell.active {
            background: var(--accent);
            color: white;
            font-weight: 600;
        }

        /* 学习小组 */
        .study-groups {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
        }

        .groups-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .group-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .group-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            cursor: pointer;
            transition: all var(--transition-fast);
        }

        .group-item:hover {
            background: var(--bg-hover);
            transform: translateX(2px);
        }

        .group-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            background: linear-gradient(135deg, #10b981 0%, #065f46 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            flex-shrink: 0;
        }

        .group-icon svg {
            width: 20px;
            height: 20px;
        }

        .group-content {
            flex: 1;
            min-width: 0;
        }

        .group-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .group-members {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .group-status {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: #34c759;
            flex-shrink: 0;
        }

        /* 排行榜 */
        .leaderboard {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 20px;
        }

        .leaderboard-title {
            font-size: 15px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }

        .leaderboard-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .leaderboard-row {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px;
            background: var(--bg-secondary);
            border-radius: var(--radius-sm);
            transition: all var(--transition-fast);
        }

        .leaderboard-row:hover {
            background: var(--bg-hover);
        }

        .rank-badge {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 12px;
            flex-shrink: 0;
        }

        .rank-1 { background: #ffd700; color: white; }
        .rank-2 { background: #c0c0c0; color: white; }
        .rank-3 { background: #cd7f32; color: white; }
        .rank-other { background: var(--bg-hover); color: var(--text-secondary); }

        .rank-user {
            flex: 1;
            min-width: 0;
        }

        .rank-user-name {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 2px;
        }

        .rank-user-hours {
            font-size: 11px;
            color: var(--text-secondary);
        }

        .rank-points {
            font-size: 15px;
            font-weight: 700;
            color: var(--accent);
            flex-shrink: 0;
        }

        /* 响应式 */
        @media (max-width: 1200px) {
            .page-container {
                grid-template-columns: 260px 1fr;
            }
            .sidebar-right {
                display: none;
            }
        }

        @media (max-width: 768px) {
            .page-container {
                grid-template-columns: 1fr;
                padding: 20px 16px;
            }
            .sidebar-left {
                display: none;
            }
            .course-grid {
                grid-template-columns: 1fr;
            }
            .welcome-stats {
                gap: 32px;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="nav">
        <div class="nav-inner">
            <div class="nav-logo">智慧学堂</div>

            <div class="nav-menu">
                <a href="../index.html" class="nav-link">首页</a>
                <a href="courses.html" class="nav-link">课程</a>
                <a href="#" class="nav-link">社区</a>
                <a href="#" class="nav-link">PK竞技</a>
            </div>

            <div class="nav-actions">
                <button class="theme-toggle" id="themeToggle" aria-label="切换主题">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                <div class="user-menu">
                    <div class="user-avatar" id="userAvatar">
                        <span id="avatarText">U</span>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <!-- 主容器 -->
    <div class="page-container">
        <!-- 左侧边栏 -->
        <aside class="sidebar-left">
            <!-- 用户资料卡片 -->
            <div class="user-profile-card">
                <div class="profile-avatar">
                    <svg viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                    </svg>
                </div>
                <div class="profile-name" id="profileName">用户</div>
                <div class="profile-level">Lv.12 高级学员</div>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="studyDays">0</div>
                        <div class="profile-stat-label">学习天数</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="completedCourses">0</div>
                        <div class="profile-stat-label">完成课程</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="totalPoints">0</div>
                        <div class="profile-stat-label">积分</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value" id="certificates">0</div>
                        <div class="profile-stat-label">证书</div>
                    </div>
                </div>
            </div>

            <!-- 快速导航 -->
            <div class="quick-nav">
                <h3 class="quick-nav-title">快速访问</h3>
                <div class="quick-nav-list">
                    <a href="profile-enhanced.html" class="quick-nav-item">
                        <div class="quick-nav-icon" style="color: #ef4444;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
                            </svg>
                        </div>
                        <span>个人资料</span>
                    </a>
                    <a href="#" class="quick-nav-item">
                        <div class="quick-nav-icon" style="color: #3b82f6;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 4h5v8l-2.5-1.5L6 12V4z"/>
                            </svg>
                        </div>
                        <span>我的课程</span>
                    </a>
                    <a href="#" class="quick-nav-item">
                        <div class="quick-nav-icon" style="color: #10b981;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"/>
                            </svg>
                        </div>
                        <span>作业中心</span>
                    </a>
                    <a href="#" class="quick-nav-item">
                        <div class="quick-nav-icon" style="color: #f59e0b;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z"/>
                            </svg>
                        </div>
                        <span>我的订单</span>
                    </a>
                    <a href="#" class="quick-nav-item">
                        <div class="quick-nav-icon" style="color: #8b5cf6;">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
                            </svg>
                        </div>
                        <span>优惠券</span>
                    </a>
                </div>
            </div>
        </aside>

        <!-- 中间内容区 -->
        <main class="main-content">
            <!-- 欢迎横幅 -->
            <div class="welcome-banner">
                <div class="welcome-content">
                    <h1 class="welcome-title" id="welcomeTitle">欢迎回来</h1>
                    <p class="welcome-subtitle" id="welcomeSubtitle">继续您的学习之旅</p>
                    <div class="welcome-stats">
                        <div>
                            <div class="welcome-stat-value" id="todayHours">0</div>
                            <div class="welcome-stat-label">今日学习时长(小时)</div>
                        </div>
                        <div>
                            <div class="welcome-stat-value" id="weekLessons">0</div>
                            <div class="welcome-stat-label">本周完成课时</div>
                        </div>
                        <div>
                            <div class="welcome-stat-value" id="monthAttendance">0%</div>
                            <div class="welcome-stat-label">本月出勤率</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 学习进度 -->
            <div class="progress-section">
                <div class="section-header">
                    <h2 class="section-title">继续学习</h2>
                    <a href="#" class="section-link">
                        查看全部
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>
                </div>
                <div class="course-list" id="courseList">
                    <!-- Courses will be loaded here -->
                </div>
            </div>

            <!-- 推荐课程 -->
            <div class="recommendations">
                <div class="section-header">
                    <h2 class="section-title">为您推荐</h2>
                    <a href="#" class="section-link">
                        更多推荐
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                    </a>
                </div>
                <div class="course-grid" id="recommendedCourses">
                    <!-- Recommended courses will be loaded here -->
                </div>
            </div>
        </main>

        <!-- 右侧边栏 -->
        <aside class="sidebar-right">
            <!-- 学习计划 -->
            <div class="study-calendar">
                <h3 class="calendar-title">本月学习计划</h3>
                <div class="calendar-grid" id="calendarGrid">
                    <!-- Calendar will be generated here -->
                </div>
            </div>

            <!-- 学习小组 -->
            <div class="study-groups">
                <h3 class="groups-title">我的学习小组</h3>
                <div class="group-list">
                    <div class="group-item">
                        <div class="group-icon">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                            </svg>
                        </div>
                        <div class="group-content">
                            <div class="group-name">前端进阶小组</div>
                            <div class="group-members">156 成员 · 12 在线</div>
                        </div>
                        <div class="group-status"></div>
                    </div>
                    <div class="group-item">
                        <div class="group-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zm6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8z"/>
                            </svg>
                        </div>
                        <div class="group-content">
                            <div class="group-name">算法竞赛队</div>
                            <div class="group-members">89 成员 · 8 在线</div>
                        </div>
                        <div class="group-status"></div>
                    </div>
                    <div class="group-item">
                        <div class="group-icon" style="background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%);">
                            <svg viewBox="0 0 24 24" fill="currentColor">
                                <path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/>
                            </svg>
                        </div>
                        <div class="group-content">
                            <div class="group-name">项目实战营</div>
                            <div class="group-members">234 成员 · 45 在线</div>
                        </div>
                        <div class="group-status"></div>
                    </div>
                </div>
            </div>

            <!-- 排行榜 -->
            <div class="leaderboard">
                <h3 class="leaderboard-title">学习排行榜</h3>
                <div class="leaderboard-list" id="leaderboardList">
                    <!-- Leaderboard will be loaded here -->
                </div>
            </div>
        </aside>
    </div>

    <script>
        const API_BASE = '/api';
        let userData = null;

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            initTheme();
            checkAuth();
            loadUserData();
            loadCourses();
            loadRecommendations();
            generateCalendar();
            loadLeaderboard();
        });

        // 主题切换
        function initTheme() {
            const theme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', theme);
            updateThemeIcon(theme);
        }

        function updateThemeIcon(theme) {
            const toggle = document.getElementById('themeToggle');
            if (theme === 'dark') {
                toggle.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                `;
            } else {
                toggle.innerHTML = `
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                `;
            }
        }

        document.getElementById('themeToggle').addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            localStorage.setItem('theme', newTheme);
            updateThemeIcon(newTheme);
        });

        // 认证检查
        function checkAuth() {
            const token = localStorage.getItem('token');
            if (!token) {
                window.location.href = 'login.html';
                return;
            }
        }

        // 加载用户数据
        async function loadUserData() {
            try {
                const user = JSON.parse(localStorage.getItem('user') || '{}');
                userData = user;

                if (user.username) {
                    const initials = user.username.charAt(0).toUpperCase();
                    document.getElementById('avatarText').textContent = initials;
                    document.getElementById('profileName').textContent = user.username;
                    document.getElementById('welcomeTitle').textContent = `欢迎回来，${user.username}`;
                }

                // Mock data for stats
                document.getElementById('studyDays').textContent = '156';
                document.getElementById('completedCourses').textContent = '42';
                document.getElementById('totalPoints').textContent = '2850';
                document.getElementById('certificates').textContent = '28';
                document.getElementById('todayHours').textContent = '3.5';
                document.getElementById('weekLessons').textContent = '12';
                document.getElementById('monthAttendance').textContent = '95';
                document.getElementById('welcomeSubtitle').textContent = '今天是您学习的第156天，继续保持！';

            } catch (error) {
                console.error('Error loading user data:', error);
            }
        }

        // 加载课程
        async function loadCourses() {
            const courseList = document.getElementById('courseList');

            // Mock course data
            const courses = [
                { id: 1, title: 'Vue 3 高级开发实战', chapter: '第8章 · 组合式API深入 · 共12课时', progress: 65 },
                { id: 2, title: 'UI/UX设计原理与实践', chapter: '第3章 · 色彩理论 · 共8课时', progress: 35 },
                { id: 3, title: '人工智能入门到精通', chapter: '第5章 · 深度学习基础 · 共15课时', progress: 80 }
            ];

            courseList.innerHTML = courses.map(course => `
                <div class="course-item">
                    <div class="course-thumb">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
                        </svg>
                    </div>
                    <div class="course-details">
                        <div class="course-name">${course.title}</div>
                        <div class="course-chapter">${course.chapter}</div>
                        <div class="progress-track">
                            <div class="progress-bar" style="width: ${course.progress}%;"></div>
                        </div>
                    </div>
                    <div class="course-action">
                        <button class="continue-btn" onclick="continueCourse(${course.id})">继续学习</button>
                    </div>
                </div>
            `).join('');
        }

        // 加载推荐课程
        async function loadRecommendations() {
            const grid = document.getElementById('recommendedCourses');

            // Mock recommended courses
            const courses = [
                { id: 101, title: 'React 18 新特性详解', category: '前端开发', instructor: '李明', price: 299, rating: 4.9 },
                { id: 102, title: 'Python高性能编程', category: '后端开发', instructor: '王芳', price: 399, rating: 4.8 },
                { id: 103, title: 'AWS云架构师认证', category: '云计算', instructor: '赵强', price: 599, rating: 5.0 },
                { id: 104, title: '数据可视化实战', category: '数据分析', instructor: '刘洋', price: 199, rating: 4.7 }
            ];

            grid.innerHTML = courses.map(course => `
                <div class="rec-course-card" onclick="viewCourse(${course.id})">
                    <div class="rec-course-cover">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z"/>
                        </svg>
                    </div>
                    <div class="rec-course-body">
                        <div class="rec-course-category">${course.category}</div>
                        <div class="rec-course-title">${course.title}</div>
                        <div class="rec-course-instructor">讲师：${course.instructor}</div>
                        <div class="rec-course-footer">
                            <span class="rec-course-price">¥${course.price}</span>
                            <span class="rec-course-rating">
                                <svg viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/>
                                </svg>
                                ${course.rating}
                            </span>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // 生成日历
        function generateCalendar() {
            const grid = document.getElementById('calendarGrid');
            const days = ['日', '一', '二', '三', '四', '五', '六'];
            const activeDays = [1, 2, 3, 4, 5, 8, 9, 10, 11, 12, 15];

            let html = days.map(day => `<div class="calendar-cell">${day}</div>`).join('');

            for (let i = 1; i <= 21; i++) {
                const active = activeDays.includes(i) ? 'active' : '';
                html += `<div class="calendar-cell ${active}">${i}</div>`;
            }

            grid.innerHTML = html;
        }

        // 加载排行榜
        function loadLeaderboard() {
            const list = document.getElementById('leaderboardList');

            const users = [
                { rank: 1, name: '王小明', hours: 42, points: 2890 },
                { rank: 2, name: '李华', hours: 38, points: 2650 },
                { rank: 3, name: '张三（你）', hours: 35, points: 2450 },
                { rank: 4, name: '赵六', hours: 32, points: 2280 }
            ];

            list.innerHTML = users.map(user => `
                <div class="leaderboard-row">
                    <div class="rank-badge rank-${user.rank <= 3 ? user.rank : 'other'}">${user.rank}</div>
                    <div class="rank-user">
                        <div class="rank-user-name">${user.name}</div>
                        <div class="rank-user-hours">本周学习 ${user.hours} 小时</div>
                    </div>
                    <div class="rank-points">${user.points}</div>
                </div>
            `).join('');
        }

        // 继续学习课程
        function continueCourse(courseId) {
            console.log('Continue course:', courseId);
            window.location.href = `course-detail.html?id=${courseId}`;
        }

        // 查看课程
        function viewCourse(courseId) {
            console.log('View course:', courseId);
            window.location.href = `course-detail.html?id=${courseId}`;
        }
    </script>
</body>
</html>
